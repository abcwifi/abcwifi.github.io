<!DOCTYPE html>
<html>
	<head>
		<title>WiFi abc</title>
		<meta charset="utf-8">
		<meta http-equiv="cache-control" content="private" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- Tell the browser to be responsive to screen width -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- Theme color -->
		<meta name="theme-color" content="#3a4149" />
		<!-- Font Awesome -->
		<link rel="stylesheet" type="text/css" href="css/font-awesome/css/font-awesome.min.css" />
		<!-- Mikhmon UI -->
		<link rel="stylesheet" href="css/mikhmon-ui.dark.min.css">
		<!-- jQuery -->
		<script src="js/jquery.min.js"></script>
		<!-- pace -->
		<link href="css/pace.dark.css" rel="stylesheet" />
		<script src="js/pace.min.js"></script>

		
	</head>
	<body>
<center>
<?php if ($id != "") { ?>


<?php if (($id == "settings" && $session == "new") || $id == "settings" && $router == "new") {
}else if ($id == "settings" || $id == "editor"|| $id == "uplogo" || $id == "connect"){
?>  


<?php 
} ?>  
  
</div>
<?php 
include('./info.php');
} else { ?>


<a id="openNav" hidden="true" class="navbar-hover" href="javascript:void(0)"></a>
<a id="closeNav" hidden="true" class="navbar-hover" href="javascript:void(0)"></a>
<script>
$(document).ready(function(){
  $(".connect").change(function(){
    notify("<?= $_connecting ?>");
    connect(this.value)
  });
  $(".stheme").change(function(){
    notify("<?= $_loading_theme ?>");
    stheme(this.value)
  });
});
</script>
<?php 
include('./include/info.php');
} ?>


<div class="dropdown-btn text-center"> &nbsp;
<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown-btn"> Agen-<?= $useradm; ?> Semua Paket </button>
</div>
<div class="dropdown-container <?= $lmenu; ?>">
   <a class="btn bg-blue" href="./?hotspot=Agen-x-4-JAM&profile=Vc<?= $useradm; ?>x-4-JAM&session=<?= $session; ?>"><span style="font-size: 21px;">4-JAM</span></a>
   <a class="btn bg-blue" href="./?hotspot=Agen-x-6-JAM&profile=Vc<?= $useradm; ?>x-6-JAM&session=<?= $session; ?>"><span style="font-size: 21px;">6-JAM</span></a>
   <a class="btn bg-blue" href="./?hotspot=Agen-x-9-JAM&profile=Vc<?= $useradm; ?>x-9-JAM&session=<?= $session; ?>"><span style="font-size: 21px;">9-JAM</span></a></br>
<div class=""><a style="text-decoration: underline; color:#000;" href="$(link-login-only)?dst=$(link-orig-esc)"></a></div>
   <a class="btn bg-green" href="./?hotspot=Agen-x-1-HARI&profile=Vc<?= $useradm; ?>x-1-HARI&session=<?= $session; ?>"><span style="font-size: 20px;">1-HARI</span></a>
   <a class="btn bg-green" href="./?hotspot=Agen-x-2-HARI&profile=Vc<?= $useradm; ?>x-2-HARI&session=<?= $session; ?>"><span style="font-size: 20px;">2-HARI</span></a>
   <a class="btn bg-green" href="./?hotspot=Agen-x-3-HARI&profile=Vc<?= $useradm; ?>x-3-HARI&session=<?= $session; ?>"><span style="font-size: 20px;">3-HARI</span></a></br>
<div class=""><a style="text-decoration: underline; color:#000;" href="$(link-login-only)?dst=$(link-orig-esc)"></a></div>
   <a class="btn bg-red" href="./?hotspot=Agen-x-7-HARI&profile=Vc<?= $useradm; ?>x-7-HARI&session=<?= $session; ?>"><span style="font-size: 18px;">7-HARI</span></a>
   <a class="btn bg-red" href="./?hotspot=Agen-x-14-HARI&profile=Vc<?= $useradm; ?>x-14-HARI&session=<?= $session; ?>"><span style="font-size: 17px;">14-HARI</span></a>
   <a class="btn bg-red" href="./?hotspot=Agen-x-30-HARI&profile=Vc<?= $useradm; ?>x-30-HARI&session=<?= $session; ?>"><span style="font-size: 17px;">30-HARI</span></a></br>
<div class=""><a style="text-decoration: underline; color:#000;" href="$(link-login-only)?dst=$(link-orig-esc)"></a></div>
<div class=""><a style="text-decoration: underline; color:#000;" href="$(link-login-only)?dst=$(link-orig-esc)"></a></div>
</div></div>
&nbsp; Data Voucher
<CENTER>
<?php
/*
 *  Copyright (C) 2018 Laksamadi Guko.
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

// hide all error
error_reporting(0);
ini_set('max_execution_time', 300);

if (!isset($_SESSION["mikhmon"])) {
  header("Location:../seller.php?id=login");
} else {

  if ($prof == "") {
    $getuser = $API->comm("/ip/hotspot/user/print");
    $TotalReg = count($getuser);

    $counttuser = $API->comm("/ip/hotspot/user/print", array(
      "count-only" => ""
    ));

  } elseif ($prof != "") {
    $getuser = $API->comm("/ip/hotspot/user/print", array(
      "?profile" => "$prof",
    ));
    $TotalReg = count($getuser);

    $counttuser = $API->comm("/ip/hotspot/user/print", array(
      "count-only" => "",
      "?profile" => "$prof",
    ));

  }
  if ($comm != "") {
    $getuser = $API->comm("/ip/hotspot/user/print", array(
      "?comment" => "$comm",
    //"?uptime" => "00:00:00"
    ));
    $TotalReg = count($getuser);

    $counttuser = $API->comm("/ip/hotspot/user/print", array(
      "count-only" => "",
      "?comment" => "$comm",
    ));
    
  }
  $exp = $_GET['exp'];
  if ($exp != "") {
    $getuser = $API->comm("/ip/hotspot/user/print", array(
      "?limit-uptime" => "1s",
    ));
    
    $counttuser = $API->comm("/ip/hotspot/user/print", array(
      "count-only" => "",
      "?limit-uptime" => "1s",
    ));
    
  }
  $getprofile = $API->comm("/ip/hotspot/user/profile/print");
  $TotalReg2 = count($getprofile);
}
?>
<center>
<style>
        input[type="password"]::placeholder {
            
            /* Firefox, Chrome, Opera */
            text-align: center;
        }
        input[type="text"]::placeholder {
            
            /* Firefox, Chrome, Opera */
            text-align: center;
        }
        input[type="tel"]::placeholder {
            
            /* Firefox, Chrome, Opera */
            text-align: center;
        }
        input[type="email"]:-ms-input-placeholder {
            
            /* Internet Explorer 10-11 */
            text-align: center;
        }
        input[type="email"]::-ms-input-placeholder {
            
            /* Microsoft Edge */
            text-align: center;
        }
        body {
            text-align:center;
        }
        h1 {
            color:green;
        }
    </style>

<meta http-equiv="refresh" content="58" >
<div class="">
      <select hidden="true" style="padding:0px;" class="card-header" onchange="location = this.value; loader()">
  </div>

  <div class="">
    <select style="padding:0px;" class="card-header" id="comment" name="comment" onchange="location = './?hotspot=users&comment='+ this.value +'&session=<?= $session;?>';">
    <?php
    if ($comm != "") {
    } else {
    }
    $TotalReg = count($getuser);
    for ($i = 0; $i < $TotalReg; $i++) {
      $ucomment = $getuser[$i]['comment'];
      $uprofile = $getuser[$i]['profile'];
      $acomment .= ",".$ucomment." Paket : ". $uprofile;
    }

    $ocomment=  explode(",",$acomment);
    
    $comments=array_count_values($ocomment) ;
    foreach ($comments as $tcomment=>$value) {

      if (is_numeric(substr($tcomment, 3, 3))) {
       
        echo "<option value='" . explode("#",$tcomment)[0] . "' >". explode("#",$tcomment)[0]." ".explode("#",$tcomment)[1]. " [".$value. "]</option>";
       }
 
    }

    ?>
<span id="timer1"> </span> | &nbsp;<i onclick="location.reload();" class="fa fa-refresh pointer " title="Reload data"></i>&nbsp;&nbsp;59 detik cek otomatis
    </select>
 <script type="text/javascript">

/* Count Down Script (c)2010 John Davenport Scheuer
   as first seen in http://www.dynamicdrive.com/forums/
   username: jscheuer1 - This Notice Must Remain for Legal Use
   */

function Timer(id, minLimit, callback){
	var thisTimer = this;
	this.limit = minLimit * 60;
	this.callback = callback;
	this.timer = 0;
	this.addEvent(window, 'load', function(){
		thisTimer.el = document.getElementById(id);
		thisTimer.txt = thisTimer.el.firstChild;
		thisTimer.intv = setInterval(function(){thisTimer.intvFunc();}, 1000);
	});
}

Timer.prototype = {

	intvFunc: function(){
		this.txt.nodeValue = this.formatTime(++this.timer);
		if(this.timer === this.limit){
			clearInterval(this.intv);
			this.callback.call(this);
		}
	},

	formatNum: function(n){
		return n < 10?  n : n;
	},

	formatTime: function (n, m, s){
		s = n % 60;
		m = (n - s) / 60;
		return ['', this.formatNum(s)].join('');
	},

	addEvent: (function(){return window.addEventListener? function(el, ev, f){
			el.addEventListener(ev, f, false);
		}:window.attachEvent? function(el, ev, f){
			el.attachEvent('on' + ev, f);
		}:function(){return;};
	})()
};

// Usage: new Timer('id_of_counting_element', #_of_mins, callback_function(){});
new Timer('timer1', 60, function(){this.el.parentNode.style.color = 'red'});
new Timer('timer2', 15, function(){this.el.parentNode.style.color = 'green'});
</script>
</head>
<body> 

  </div>
 
  <div class="col-6">
  <script>
    function printV(a,b){
    var comm = document.getElementById('comment').value;
    var url = "./voucher/print.php?id="+comm+"&"+a+"="+b+"&session=<?= $session; ?>";
    if (comm === "" ){
      <?php if ($currency == in_array($currency, $cekindo['indo'])) { ?>
      alert('Silakan pilih salah satu Comment terlebih dulu!');
      <?php
    } else { ?>
      alert('Please choose one of the Comments first!');
      <?php
    } ?>
    }else{
      var win = window.open(url, '_blank');
      win.focus();
    }}
  </script>
  </div>
</div>
<div class="btn bg-secondary" ><span style="font-size: 14px;"> Voucher Expired NOTA-QR terhapus otomatis</span></div>
<div class="overflow mr-t-10 box-bordered" style="max-height: 70vh">
<table id="" style="text-align:center;" class="table table-bordered table-hover text-nowrap">
  <thead>
  <tr></CENTER>
    <th>STATUS</th>
    <th>NOTA-QR</th>
    <th>Voucher Expired </th>
    </tr>
  </thead>

  <tbody id="tbody">

<?php
for ($i = 0; $i < $TotalReg; $i++) {
  $userdetails = $getuser[$i];
  $uid = $userdetails['.id'];
  $userver = $userdetails['server'];
  $uname = $userdetails['name'];
  $upass = $userdetails['password'];
  $uprofile = $userdetails['profile'];
  $umacadd = $userdetails['mac-address'];
  $uuptime = formatDTM($userdetails['uptime']);
  $ubytesi = formatBytes($userdetails['bytes-in'], 2);
  $ubyteso = formatBytes($userdetails['bytes-out'], 2);

  $ucomment = $userdetails['comment'];
  $udisabled = $userdetails['disabled'];
  $utimelimit = $userdetails['limit-uptime'];
  if ($utimelimit == '1s') {
    $utimelimit = ' expired';
  } else {
    $utimelimit = ' ' . $utimelimit;
  }
  $udatalimit = $userdetails['limit-bytes-total'];
  if ($udatalimit == '') {
    $udatalimit = '';
  } else {
    $udatalimit = ' ' . formatBytes($udatalimit, 2);
  }

  echo "<tr>";
  ?>
  

  <?php
  if ($udisabled == "true") {} else {}
  echo "<td>" . $userver . "</td>";

  if ($uname == $upass) {
    $usermode = "vc";
  }
  echo "<td><a title='" . $uid . "' href=./?hotspot-user=" . $uid . "&session=" . $session . ">Nota : " . $uid . " </a>";
  
  
  echo "<td>";
  if ($uname == "default-trial") {
  } else if (substr($ucomment,0,3) == "vc-" || substr($ucomment,0,3) == "up-") {
    echo "<href=./?hotspot=users&comment=" . $ucomment . "&session=" . $session . " title=''><i class='fa fa-search'></i> ". $ucomment." ". $udatalimit ." ".$utimelimit . "";
  } else if ($utimelimit == ' expired') {
    echo "<a></a>";
  }else{
    echo $ucomment.' ';
  }
  echo  "</td>";


}
?>
  </tr>

  </tbody>

</table>


</div>
</div>
</div>
<script src="./js/highcharts/highcharts.js"></script>
<script src="./js/highcharts/themes/hc.dark.js"></script>
<script src="./js/mikhmon-ui.dark.min.js"></script>
<script src="./js/mikhmon.js?t=2025-07-28_00:57:41"></script>

</body>
</html>

